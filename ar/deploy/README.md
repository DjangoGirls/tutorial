# الإعداد!

> **ملاحظه** الفصل التالي قد يكون في بعض الأحيان صعبا. استمر و أعزم على الانتهاء منه؛ الإعداد جزء هام من عملية تطوير موقع شبكة الإنترنت. ويوضع هذا الفصل في منتصف البرنامج التعليمي حتى يمكن لمدربك أن يساعدك في العمليات الأصعب قليلاً لنشر موقع الويب الخاص بك على الإنترنت. وهذا يعني أنه لا يزال يمكنك الانتهاء من البرنامج التعليمي الخاص بك بمفردك إذا نفذ الوقت منك.

حتى الأن موقعك كان متاحا فقط على حاسوبك. الأن سوف تتعلم كيف تنشره! الإعداد هو عملية نشر التطبيق الخاص بك على شبكة الإنترنت حيث يمكن للناس الذهاب إلى التطبيق الخاص بك و مشاهدته. :)

كما تعلمت، موقع على شبكة الإنترنت يجب أن يتواجد في خادم. هناك الكثير من مقدمي الخدمة متاحين على شبكة الإنترنت، ونحن سنستخدم [PythonAnywhere](https://www.pythonanywhere.com/). PythonAnywhere متوفر مجانا للتطبيقات الصغيرة التي لا تحتوي على عدد كبير من الزائرين فالآن بالتأكيد ستكون كافية بالنسبة لك.

الخدمات الخارجية الأخرى ستقوم باستخدام [GitHub](https://www.github.com)، وهي خدمة استضافة التعليمات البرمجية. هناك آخرون ، ولكن تقريبا جميع المبرمجين لديهم حساب GitHub في هذه الأيام، والآن أنت سوف يمكنك أيضا الحصول على حساب!

سوف تكون هذه الأماكن الثلاثة هامة بالنسبة لك. الكمبيوتر الخاص بك سوف يكون المكان حيث يمكنك القيام بالتطوير والإختبار. عندما تكون راضيا عن التغييرات، ستقوم بوضع نسخة من التعليمات البرمجية على GitHub. موقعك سيكون على بايثون في كل مكان ، وستقوم بتحديثه عبر استقدام نسخة جديدة من GitHub.

# جيت (Git)

> **ملاحظة** إذا كنت قمت بإجراء خطوات التثبيت سابقا، لا تحتاج للقيام بذلك مرة أخرى -يمكنك التخطي إلى الجزء التالي والبدء في إنشاء مستودع Git الخاص بك.

{% include "/deploy/install_git.md" %}

## ابتداء مستودعك في Git

Git يتعقب التغييرات التي تحدث لمجموعة معينة من الملفات في ما يسمى بمستودع الكود (أو "الريبو" للاختصار). لنبدأ انشاء مستودع (ريبو) لمشروعنا. افتح وحدة التحكم الخاص بك ، وشغل هذه الأوامر في دليل `djangogirls`:

> **ملاحظة** تحقق من دليل العمل الحالي الخاص بك مع `pwd` (Mac OS X/لينكس) أو `cd` (في Windows) قبل تهيئة المستودع. يجب أن تكون في المجلد `djangogirls`.

{% filename %}command-line{% endfilename %}

    $ git init
    Initialized empty Git repository in ~/djangogirls/.git/
    $ git config --global user.name "Your Name"
    $ git config --global user.email you@example.com
    

تهيئة المستودع هو شيء نحتاج القيام به مرة واحدة فقط لكل مشروع (ولن تضطر إلى إعادة إدخال اسم المستخدم والبريد الإلكتروني مرة أخرى).

Git سوف يتعقب التغييرات لكافة الملفات والمجلدات الموجودة في هذا الدليل، ولكن هناك بعض الملفات التي نريد Git أن يتجاهلها. نحن نقوم بهذا عبر انشاء ملف يسمى `.gitignore` في الدليل الرئيسي. افتح المحرر الخاص بك وقم بإنشاء ملف جديد مع محتويات التالية:

{% filename %}.gitignore{% endfilename %}

    * .pyc * ~
     __pycache__ 
    myvenv db.sqlite3 / static .DS_Store
    

واحفظه ك `.gitignore` في مجلد "djangogirls".

> **ملاحظة** النقطه في بداية اسم الملف مهمه! إذا كنت تواجه أي صعوبة في انشائه (على سبيل المثال ،أجهزة ماكينتوش لا تمكنك من إنشاء الملفات التي تبدأ بنقطة عن طريق الباحث)، إذا قم باستخدام ميزة "حفظ باسم" في المحرر الخاص بك.
> 
> **ملاحظة** أحد الملفات التي قمت بتحديدها في ملف `.gitignore` هي `db.sqlite3`. هذا الملف هو قاعدة البيانات المحلية الخاصة بك، حيث يتم تخزين جميع المشاركات الخاصة بك. لا نريد اضافة هذا الى المستودع الخاص بك ، لأن موقعك على بايثون في كل مكان سيكون يستخدم قاعدة بيانات مختلفة. قاعدة البيانات تلك يمكن ان تكون SQLite, مثل جهاز التطوير الخاص بك ، لكن في العادة ستستخدم واحدة تسمى MySQL, والتي يمكنها التعامل مع الكثير من الزوار اكثر من SQLite. وفي كلتا الحالتين، بتجاهل قاعدة بيانات SQLite للنسخة GitHub، يعني أن جميع المشاركات التي قمت بإنشائها حتى الآن ستبقى و تكون متاحة محلياً، ولكن سيكون عليك اضافتهم مرة اخرى للإنتاج. ينبغي أن تفكر في قاعدة البيانات المحلية الخاصة بك كملعب جيد حيث يمكنك اختبار أشياء مختلفة وولا تخف من فكرة انك ستحدف مشاركاتك الحقيقية من المدونة.

انها فكرة جيدة استخدام الأمر `git status` قبل `git add` أو كلما وجدت نفسك غير متأكد من ما تغير. وهذا سيساعد على منع أي مفاجآت من الحدوث، مثل إضافة ملفات خاطئة. الأمر `git status` يرجع المعلومات عن اي ملف لم يتم اتباعه تعديله او تنظيمه, حالة الفرع، وأكثر من ذلك بكثير. يجب أن يكون المخرج مشابه لما يلي:

{% filename %}command-line{% endfilename %}

    $ git status
    On branch master
    
    Initial commit
    
    Untracked files:
      (use "git add <file>..." to include in what will be committed)
    
            .gitignore
            blog/
            manage.py
            mysite/
    
    nothing added to commit but untracked files present (use "git add" to track)
    

وأخيرا نحفض التغييرات التي قمنا بها, اذهب الى لوحة التحكم الخاصة بك وشغل هذه الأوامر:

{% filename %}command-line{% endfilename %}

    $ git add --all .
    $ git commit -m "My Django Girls app, first commit"
     [...]
     13 files changed, 200 insertions(+)
     create mode 100644 .gitignore
     [...]
     create mode 100644 mysite/wsgi.py
     ```
    
    ## Wypychanie kodu na GitHuba
    
    Przejdź na [GitHub.com](https://www.github.com) i załóż nowe, darmowe konto użytkonika. (إذا كنت قد سبق أن فعلت ذلك في ورشة العمل الإعدادية، هذا عظيم!) قم بإنشاء مستودع جديد، وإعطائه اسم "my-first-blog". اترك خانة "initialize with a README" دون اختيارها واترك الخيار.gitignore فارغ (لقد فعلنا ذلك يدوياً) وأترك الترخيص على أنه لا شيء.
    
    <img src="images/new_github_repo.png" /> > * * ملاحظة * * اسم 'my-first-blog' مهم – يمكن أن تختار شيئا آخر، لكن هذا سيأخد الكثير من الوقت في الإرشادات الموجودة أدناه، وسيكون عليك استبداله كل مرة. ربما من الأسهل الإبقاء على اسم 'بmy-first-blog'.
    
    في الشاشة التالية، سوف يظهر لك رابط استنساخ المستودع الخاص بك. اختر إصدار "HTTPS"، إنسخه ، وسوف نلصقه في التيرمينال قريبا: <img src="images/github_get_repo_url_screenshot.png" /> الآن نحن بحاجة إلى ربط المستودع على جهاز الكمبيوتر الخاص بك بالمستودع الموجود على GitHub.
    
    اكتب الأمر التالي في وحدة التحكم الخاصة بك (استبدل '<your-github-username>' مع اسم المستخدم الذي قمت بإدخاله عند إنشاء حساب GitHub الخاص بك، ولكن دون أقواس الزاوية):{% filename %}command-line{% endfilename %}
    

$ git remote add origin https://github.com/<your-github-username>/my-first-blog.git $ git push -u origin master

    <br />أدخل اسم المستخدم في GitHub الخاص بك وكلمة المرور، ويجب أن ترى شيئا من هذا القبيل:{% filename %}command-line{% endfilename %}
    

Username for 'https://github.com': votre-nom Password for 'https://votre-nom@github.com': Counting objects: 6, done. Writing objects: 100% (6/6), 200 bytes | 0 bytes/s, done. Total 3 (delta 0), reused 0 (delta 0) To https://github.com/hjwp/my-first-blog.git

- [new branch] master -> master Branch master set up to track remote branch master from origin.

    <br />&lt;!--TODO: maybe do ssh keys installs in install party, and point ppl who dont have it to an extension --&gt;
    
    تعليماتك البرمجية موجودة الأن على GitHub. الذهاب والتحقق من ذلك!  ستجد أنها في نهاية الشركة – [Django] (https://github.com/django/django) وفي [دروس جانغو الفتيات] (https://github.com/DjangoGirls/tutorial)، والعديد من مشاريع البرمجيات الكبيرة مفتوحة المصدر الأخرى أيضا تستضيف التعليمات البرمجية الخاصة بهم في GitHub. :) # إنشاء مدونتنا على بايثون في كل مكان &gt; * * ملاحظة * * قد تم إنشاء حساب ببايثون في كل مكان في وقت سابق أثناء خطوات التثبيت – إذا كان الأمر كذلك، لا حاجة للقيام بذلك مرة أخرى.
    
    {% include "/deploy/signup_pythonanywhere.md" %}
    
    
    ## سحب التعليمات البرمجية لدينا من بايثون في كل مكان
    
    عندما تسجل في بايثون في كل مكان سوف يتم اخدك للوحة التحكم. اختر هذا الخيار لتشغيل وحدة تحكم "Bash" – والذي هو اصدار من بايثون في كل مكان للوحة التحكم، تماما مثل الموجود على حاسوبك.
    
    &lt;img src="images/pythonanywhere_bash_console.png" alt="pointing at Other: Bash in Start a new Console" /&gt; &gt; * * ملاحظة * * "بايثون في كل مكان " يستند على لينكس، حتى إذا كنت على ويندوز، وحدة التحكم سوف تبدو مختلفة قليلاً من التي تتواجد على حاسوبك الخاص.
    
    دعونا نسحب تعليماتنا البرمجية من GitHub وعلى بايثون في كل مكان عن طريق إنشاء "استنساخ" لمستودعنا. اكتب الأمر التالي في وحدة التحكم على بايثون في كل مكان (لا تنسى أن استخدام اسم المستخدم الخاص بك في GitHub بدلاً من `&lt;your-github-username&gt;`):
    
    {% filename %}PythonAnywhere command-line{% endfilename %}
    

$ git clone https://github.com/<your-github-username>/my-first-blog.git

    <br />هذا سيستنسخ نسخة من تعليماتك البرمجية في بايثون في كل مكان ، يمكنك تفقد ذالك عبر كتابة `tree my-first-blog`:
    
    {% filename %}PythonAnywhere command-line{% endfilename %}
    

$ tree my-first-blog my-first-blog/ ├── blog │ ├── **init**.py │ ├── admin.py │ ├── migrations │ │ ├── 0001_initial.py │ │ └── **init**.py │ ├── models.py │ ├── tests.py │ └── views.py ├── manage.py └── mysite ├── **init**.py ├── settings.py ├── urls.py └── wsgi.py

    <br /><br />### إنشاء بيئة افتراضية على بايثون في كل مكان
    فقط كما فعلت على حاسوبك ، يمكنك انشاء بيئة افتراضية على بايثون في كل مكان. في نافذة وحدة التحكم، اكتب
    {% filename %}PythonAnywhere command-line{% endfilename %}
    

$ cd my-first-blog

$ virtualenv --python=python3.6 myvenv Running virtualenv with interpreter /usr/bin/python3.6 [...] Installing setuptools, pip...done.

$ source myvenv/bin/activate

(myvenv) $ pip install django~=1.11.0 Collecting django [...] Successfully installed django-1.11.3

    <br /><br />&gt; * * ملاحظة * * الخطوة 'pip install' يمكن أن تستغرق بضع دقائق.  الصبر والصبر!  ولكن إذا إستغرق الأمر أكثر من خمس دقائق، هناك خطأ ما.  اسأل المدرب الخاص بك.
    
    &lt;!-TODO: التفكير في استخدام requirements.txt بدلاً من pip install.--&gt; # # # إنشاء قاعدة بيانات بايثون في كل مكان
     هنا شيء آخر مختلف بين الكمبيوتر الخاص بك والخادم: إنه يستخدم قاعدة بيانات مختلفة. حيث يمكن أن تكون حسابات المستخدم ومشاركاته مختلفة على الملقم وعلى الكمبيوتر الخاص بك.
    
    تماما كما فعلنا على جهاز الكمبيوتر الخاص بك، نحن سنكرر الخطوة لتهيئة قاعدة البيانات على الملقم، عبر `migrate` و `createsuperuser`:
    
    {% filename %}PythonAnywhere command-line{% endfilename %}
    

(mvenv) $ python manage.py migrate Operations to perform: [...] Applying sessions.0001_initial... OK (mvenv) $ python manage.py createsuperuser

    <br /># # نشر مدونتنا كتطبيق ويب
    
     الآن التعليمات البرمجية الخاصة بنا في PythonAnywhere,، وبيئتنا الإفتراضية على استعداد، وقاعدة البيانات مهيئة. نحن مستعدون لنشره كتطبيق ويب!
    
    انقر فوق العودة إلى لوحة معلومات PythonAnywhere عن طريق النقر على الشعار ومن ثم انقر فوق **Web**. وأخيراً، إضغط ***Add a new web app**.
    
    بعد التأكد من اسم النطاق الخاص بك، اختر ***manual configuration** (ملحوظة:-*not* الخيار "Django") في مربع الحوار. بعد اختيار **Python 3.6**، انقر فوق التالي لإنهاء المعالج.
    
    &gt; * *ملاحظة* * "تأكد من" اختيار الخيار "Manual configuration"، وليس "Django". نحن نحب جداً الإعداد الافتراضي لدجانغو بايثون في كل مكان. ;-)
    ### تعيين البيئة الافتراضية
    
    سيتم نقلك لصفحة تعديل بايثون في كل مكان لتطبيقك ، والذي يمكنك من الذهاب لأي مكان والقيام بالتعديلا لتطبيقك على السيرفر.
    
    &lt;img src="images/pythonanywhere_web_tab_virtualenv.png" /&gt;
     في المقطع "Virtualenv"، انقر فوق النص الأحمر الذي يقول "Enter the path to a virtualenv"، وأدخل `/home/&lt;your-PythonAnywhere-username&gt;/my-first-blog/myvenv/`. انقر فوق المربع الأزرق مع علامة اختيار لحفظ المسار قبل الانتقال.
    
    &gt; * *ملاحظة* * استبدال اسم المستخدم الخاص بك PythonAnywhere حسب الحاجة. إذا قمت بخطأ، PythonAnywhere سوف تظهر لك تحذير.
    
    
    # # # تكوين الملف WSGI
    
     جانغو يعمل باستخدام "بروتوكول WSGI"، معياراً لخدمة مواقع الويب باستخدام بيثون، الذي يدعم بايثون في كل مكان. الطريقة التي يمكننا تتعديل PythonAnywhere بها للإعتراف بمدونتنا جانغو عن طريق تحرير ملف تعديل WSGI.
    
    انقر فوق "ملف التكوين WSGI" (في المقطع "تعليمات برمجية" بالقرب من أعلى الصفحة – فإنه سوف يكون المسمى شيئا مثل '/var/www/&lt;your-PythonAnywhere-username&gt;_pythonanywhere_com_wsgi.py')، وسوف يتم نقلك إلى المحرر.
    
    حدف كافة المحتويات وتغييرها ب
    {% filename %}&lt;your-username&gt;_pythonanywhere_com_wsgi.py{% endfilename %}
    ```python
    import os
    import sys
    
    path = os.path.expanduser('~/my-first-blog')
    if path not in sys.path:
        sys.path.append(path)
    
    os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'
    
    from django.core.wsgi import get_wsgi_application
    from django.contrib.staticfiles.handlers import StaticFilesHandler
    application = StaticFilesHandler(get_wsgi_application())
    

عمل الملف هو اخبار بايثون في كل مكان اين يكون تطبيق الويب الخاص بنا ، وما هو اسم ملف اعدادات دجانغو.

`StaticFilesHandler` هو للتعامل مع CSS. هذا سيهتم بك تلقائيا اثناء التطوير المحلي بواسطة الأمر `runserver`. سنعرف المزيد عن الملفات الثابتة لاحقا في البرنامج التعليمي، عندما نقوم بتحرير CSS لموقعنا.

إضغط **Save** وثم العودة إلى علامة التبويب **Web**.

لقد انتهينا جميعا! اضغط على الزر الأخضر الكبير **Reload** وستتمكن من عرض تطبيقك. ستجد رابطا إليه أعلى الصفحة.

## نصائح لتصحيح الأخطاء

إذا ضهرت لك اي اخطاء عندما تزور موقعك ، المكان الأول الذي يجب ان تبحث فيه عن معلومات الخطأ لتصحيحه هو **error log**. ستجد رابط لهذا في بايثون في كل مكان [علامة التبويب](https://www.pythonanywhere.com/web_app_setup/). انضر ان كان هناك اي رسائل اخطاء ، الأحدث ستجدهم في الأسفل. وتشمل المشاكل الشائعة:

- نسيان واحدة من الخطوات التي قمنا بها في وحدة التحكم: إنشاء بيئة افتراضية، وتفعيلها، تثبيت جانغو فيها ، ونقل قاعدة بيانات.

- القيام بخطأ في البيئة الإفتراضية في علامة التبويب ويب – ستكون هناك عادة ما رسالة خطأ حمراء قليلاً هناك، إذا كان هناك مشكلة.

- خطأ في ملف التكوين WSGI-هل حصلت على مسار مجلد my-first-blog folder الصحيح؟

- هل اخترت نفس نسخة بايثون لبيئتك الإفتراضية ، كما فعلت لتطبيق الويب الخاص بك؟ ينبغي أن يكون 3.6.

وهناك أيضا بعض [النصائح العامة لتصحيح الأخطاء على ويكي PythonAnywhere](https://www.pythonanywhere.com/wiki/DebuggingImportError).

وتذكر أن المدرب هنا للمساعدة!

# أنت على الهواء الأن!

الصفحة الرئيسية لموقعك يجب ان تقول "لقد عمل" تماما كما تقول على حاسوبك الخاص. حاول إضافة `/admin/` إلى نهاية عنوان URL، وسوف يتم نقلك إلى موقع المشرف. سجل الدخول باستخدام اسم المستخدم وكلمة المرور، وسترى انه يمكنك إضافة منشورات جديدة على الملقم.

وبمجرد الانتهاء من إنشاء عدد قليل من المنشورات، يمكنك العودة إلى الإعدادات المحلية الخاصه بك (ليس بيثون في كل مكان). من هنا يجب أن تعمل على الإعدادات المحليه لإجراء التغييرات. هذا هو سير العمل المشترك في تطوير الإنترنت ـ إجراء تغييرات محليا، ودفع تلك التغييرات إلى GitHub، وسحب التغييرات الخاصة بك وصولا إلى خادم الويب الحي. هذا يسمح لك بالعمل والتجربة دون تحطيم موقع الويب الخاص بك. رائع! اليس كذالك؟

إعطي نفسك تربيت *كبير* على الظهر! النشر علي الملقم هو واحد من أصعب أجزاءتطوير الشبكة، وغالبا ما يستغرق الناس عدة أيام قبل أن يجعلوه يعمل. لكنك قد وضعت موقعك على الهواء ، بهذا النحو!